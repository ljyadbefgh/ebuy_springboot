webpackJsonp([68],{NWYa:function(e,i){},YSD9:function(e,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var t={render:function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":0==e.loading,"show-close":0==e.loading,"destroy-on-close":"",align:"center",width:"630px"},on:{"update:visible":function(i){e.dialogFormVisible=i},opened:e.openDialogChecked,closed:e.closeDailogClean}},[a("el-transfer",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{align:"left","element-loading-text":"与服务器交互中，请稍后……",titles:e.titles,data:e.roles},on:{change:e.handleChange},model:{value:e.rolesSelect,callback:function(i){e.rolesSelect=i},expression:"rolesSelect"}})],1)},staticRenderFns:[]};var n=a("VU/8")({name:"AdminRoleRelationManage",data:function(){return{loading:!1,id:"",name:"",title:"",titles:["未赋予的角色","已赋予的角色"],dialogFormVisible:!1,roles:[],rolesSelect:[]}},methods:{openDialog:function(e,i){this.dialogFormVisible=!0,this.id=e,this.name=i,this.title="账号("+i+")的角色关系管理"},closeDialog:function(){this.dialogFormVisible=!1},openDialogChecked:function(){""==this.id?(this.closeDialog(),this.$message.error("没有接收到要编辑的账户信息")):this.getAdminRoleRelation()},closeDailogClean:function(){},getAdminRoleRelation:function(){var e=this;this.loading=!0,this.roles.length=0,this.rolesSelect.length=0,this.$axios.get("api/backstage/adminmanage/"+this.id+"/adminRoleRelationManage").then(function(i){e.loading=!1;var a=i.data;if(0===a.code)for(var t=a.data,n=0;n<t.length;n++){var l=t[n],o=!0;1==l.role.enabled&&(o=!1),e.roles.push({key:l.role.id,label:l.role.nameZH,disabled:o}),null!=l.id&&e.rolesSelect.push(l.role.id)}}).catch(function(i){e.loading=!1})},handleChange:function(e,i,a){var t=this;this.loading=!0,"right"===i&&this.$axios.post("/api/backstage/adminmanage/"+this.id+"/adminRoleRelationManage/roles/"+a.toString()).then(function(e){t.loading=!1,0===e.data.code?(t.$message({type:"success",message:"操作成功"}),t.$emit("adminTableRefresh")):t.getAdminRoleRelation()}).catch(function(e){t.loading=!1}),"left"===i&&this.$axios.delete("/api/backstage/adminmanage/"+this.id+"/adminRoleRelationManage/roles/"+a.toString()).then(function(e){t.loading=!1,0===e.data.code?(t.$message({type:"success",message:"操作成功"}),t.$emit("adminTableRefresh")):t.getAdminRoleRelation()}).catch(function(e){t.loading=!1})}}},t,!1,function(e){a("NWYa")},"data-v-4be7d54e",null);i.default=n.exports}});
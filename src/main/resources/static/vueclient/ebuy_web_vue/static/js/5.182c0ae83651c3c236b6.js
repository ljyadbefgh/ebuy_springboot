webpackJsonp([5],{ZjIZ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"PurviewManage",components:{PurviewAdd:function(){return i.e(37).then(i.bind(null,"hLfi"))},PurviewEdit:function(){return i.e(34).then(i.bind(null,"txGK"))}},data:function(){return{disabled:!0,table:{tableData:[],limit:20,page:1,total:0,hideOnSinglePage:!1},multipleSelection:[]}},methods:{getPurviews:function(){var e=this;this.$axios.get("/api/backstage/purviewmanage",{params:{page:this.table.page,limit:this.table.limit}}).then(function(t){var i=t.data;0===i.code&&(e.table.tableData=i.data,e.table.total=i.count)})},handleCurrentChange:function(e){this.table.page=e,this.getPurviews()},handleSizeChange:function(e){this.table.limit=e,this.getPurviews()},checkSelection:function(){if(this.multipleSelection.length>0)return!0;this.$message.error("请先选择数据")},handleSelectionChange:function(e){this.multipleSelection=e,this.multipleSelection.length>0?this.disabled=!1:this.disabled=!0},handleDelete:function(){var e=this;if(this.checkSelection()){var t=this.multipleSelection.length;this.$confirm(" 确定要批量删除这"+t+"个权限吗？","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t=[],i=0;i<e.multipleSelection.length;i++)t.push(e.multipleSelection[i].id);e.$axios.delete("/api/backstage/purviewmanage/"+t.toString()).then(function(t){0===t.data.code&&e.getPurviews()})}).catch(function(e){})}},editPurview:function(e){this.$refs.purviewEditForm.openDialog(e)}},mounted:function(){this.getPurviews()}},a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"item",staticStyle:{"margin-bottom":"5px"},attrs:{align:"left"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.$refs.purviewAddForm.openDialog()}}},[e._v("添加")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini",disabled:e.disabled},on:{click:e.handleDelete}},[e._v("删除")])],1),e._v(" "),i("div",{staticClass:"item"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.table.tableData,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"40",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{width:"200",prop:"name",label:"权限名"}}),e._v(" "),i("el-table-column",{attrs:{prop:"url",label:"路径"}}),e._v(" "),i("el-table-column",{attrs:{width:"70",align:"center",prop:"enabled",label:"是否启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.enabled?i("el-tag",{attrs:{size:"medium",type:"success"}},[e._v("是")]):e._e(),e._v(" "),0==t.row.enabled?i("el-tag",{attrs:{size:"medium",type:"info"}},[e._v("否")]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"60",align:"center",prop:"orderNum",label:"优先级"}}),e._v(" "),i("el-table-column",{attrs:{width:"60",align:"center",prop:"roleNumber",label:"角色数"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"description",label:"描述"}}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit"},on:{click:function(i){return e.editPurview(t.row.id)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),i("div",{staticClass:"text item"},[i("div",{staticClass:"block"},[i("el-pagination",{attrs:{background:"",layout:"prev,pager,next,total,sizes,jumper","hide-on-single-page":e.table.hideOnSinglePage,"page-sizes":[10,20,50,100],"page-size":e.table.limit,"current-page":e.table.page,total:e.table.total,"pager-count":11},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),e._v(" "),i("PurviewAdd",{ref:"purviewAddForm",on:{purviewTableRefresh:e.getPurviews}}),e._v(" "),i("PurviewEdit",{ref:"purviewEditForm",on:{purviewTableRefresh:e.getPurviews}})],1)},staticRenderFns:[]};var l=i("VU/8")(n,a,!1,function(e){i("hp2F")},"data-v-cdc6ef9a",null);t.default=l.exports},hp2F:function(e,t){}});
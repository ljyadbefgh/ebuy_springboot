webpackJsonp([65],{WxRB:function(e,r){},juAX:function(e,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=a("mvHQ"),i=a.n(o),s={name:"AdminAdd",props:{roles:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,dialogFormVisible:!1,adminForm:{username:"",password:"",name:"",sex:"",roleIds:[]},rules:{username:[{required:!0,message:"不能为空",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10个字符",trigger:"blur"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+$/,message:"不允许输入空格等特殊符号"}],password:[{required:!0,message:"不能为空",trigger:"blur"},{min:6,max:12,message:"长度在6到 12个字符",trigger:"blur"},{pattern:/\S$/,message:"不能出现空格",trigger:"blur"}],name:[{required:!0,message:"不能为空",trigger:"blur"},{max:8,message:"长度不能超过8个字符",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],roleIds:[{type:"array",required:!0,message:"请至少选择一个角色",trigger:"change"}]}}},methods:{openDialog:function(){this.dialogFormVisible=!0},closeDialog:function(){this.dialogFormVisible=!1},opened:function(){for(var e=0;e<this.roles.length;e++){var r=this.roles[e];1==r.defaultRole&&this.adminForm.roleIds.push(r.id)}},submitForm:function(e){var r=this;this.$refs[e].validate(function(a){if(!a)return!1;r.loading=!0,r.$axios.post(r.API.API_URL_BACKSTAGE_ADMIN_MANAGE,i()(r.adminForm)).then(function(a){r.loading=!1;var o=a.data;0===o.code&&(r.$message({type:"success",message:o.msg}),r.$refs[e].resetFields(),r.$emit("adminTableRefresh"))}).catch(function(e){r.loading=!1})})}},mounted:function(){}},t={render:function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("el-dialog",{attrs:{title:"管理员创建","close-on-click-modal":!1,visible:e.dialogFormVisible,"close-on-press-escape":0==e.loading,"show-close":0==e.loading,width:"500px"},on:{"update:visible":function(r){e.dialogFormVisible=r},opened:e.opened}},[a("el-form",{ref:"adminForm",attrs:{model:e.adminForm,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"账户名",prop:"username"}},[a("el-input",{model:{value:e.adminForm.username,callback:function(r){e.$set(e.adminForm,"username",r)},expression:"adminForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:e.adminForm.password,callback:function(r){e.$set(e.adminForm,"password",r)},expression:"adminForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"网名",prop:"name"}},[a("el-input",{model:{value:e.adminForm.name,callback:function(r){e.$set(e.adminForm,"name",r)},expression:"adminForm.name"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"性别",prop:"sex"}},[a("el-radio-group",{model:{value:e.adminForm.sex,callback:function(r){e.$set(e.adminForm,"sex",r)},expression:"adminForm.sex"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("男")]),e._v(" "),a("el-radio-button",{attrs:{label:"2"}},[e._v("女")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"角色",align:"left",prop:"roleIds"}},[a("el-checkbox-group",{model:{value:e.adminForm.roleIds,callback:function(r){e.$set(e.adminForm,"roleIds",r)},expression:"adminForm.roleIds"}},e._l(e.roles,function(r){return a("el-checkbox",{key:r.nameZH,attrs:{label:r.id,name:"roleIds"}},[e._v(e._s(r.nameZH))])}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.loading},on:{click:function(r){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(r){return e.submitForm("adminForm")}}},[e._v("确认")])],1)],1)},staticRenderFns:[]};var n=a("VU/8")(s,t,!1,function(e){a("WxRB")},"data-v-6100eebc",null);r.default=n.exports}});
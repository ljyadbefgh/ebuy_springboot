webpackJsonp([54],{HQ0e:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"CustomerPhotoUpload",data:function(){return{dialogFormVisible:!1,customer:{},action:"",imageUrl:""}},methods:{openDialog:function(e){var t=this;this.dialogFormVisible=!0,this.action=this.myVariable.baseUrl+"/api/backstage/customermanage/uploadPhoto/"+e,this.$nextTick(function(){t.$axios.get("/api/backstage/customermanage/"+e).then(function(e){var i=e.data;if(0===i.code){t.customer=i.data;var a=t.customer.picUrl;t.imageUrl=null!=a&&""!=a?a+"?"+Math.random():""}})})},closeDialog:function(){this.dialogFormVisible=!1},opened:function(){},closed:function(){this.$refs.upload.clearFiles(),this.imageUrl=""},uploadExceed:function(e,t){this.$message.error("只允许上传一个头像")},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},uploadSuccess:function(e,t,i){0===e.code?(this.imageUrl=window.URL.createObjectURL(t.raw),this.$emit("customerTableRefresh")):this.$message.error(e.msg),this.$refs.upload.clearFiles()},submitUpload:function(){this.$refs.upload.submit()}}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"头像上传",align:"center",visible:e.dialogFormVisible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},opened:e.opened,closed:e.closed}},[null!=e.imageUrl&&""!=e.imageUrl?i("img",{staticStyle:{height:"180px","min-width":"120px"},attrs:{src:e.imageUrl}}):i("img",{staticStyle:{height:"180px","min-width":"120px"},attrs:{src:e.myVariable.pic.noPicSrc}}),e._v(" "),i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{accept:"image/jpeg,image/gif,image/png,image/bmp",action:e.action,"list-type":"picture","on-exceed":e.uploadExceed,"before-remove":e.beforeRemove,"on-success":e.uploadSuccess,"show-file-list":!0,limit:1,"with-credentials":!0,"auto-upload":!1}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取图片")]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传头像")]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png/gif/bmp文件")])],1)],1)},staticRenderFns:[]};var s=i("VU/8")(a,o,!1,function(e){i("mOKI")},"data-v-cd72473e",null);t.default=s.exports},mOKI:function(e,t){}});
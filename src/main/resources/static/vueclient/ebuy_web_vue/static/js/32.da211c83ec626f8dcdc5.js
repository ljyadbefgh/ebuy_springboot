webpackJsonp([32,0],{"4xMK":function(e,t){},gHWd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("mvHQ"),o=n.n(i),s={name:"RoleMenuManage",data:function(){return{checkAll:!1,checkStrictly:!0,dialogFormVisible:!1,roleId:"",menus:[],menuIds:[],menuNodeNumber:0,optionProps:{value:"id",label:"name",children:"children",checkStrictly:!0}}},methods:{openDialog:function(e){var t=this;this.roleId=e,this.dialogFormVisible=!0,this.$nextTick(function(){t.$axios.get("api/backstage/rolemanage/menu/"+e).then(function(e){var n=e.data;0===n.code&&(t.menus=n.data.treeMenu,t.menuIds=n.data.menusId,t.menuNodeNumber=t.myMethod.tree.getNodeNumberFromTreeNode(t.menus),t.menuNodeNumber==t.menuIds.length?t.checkAll=!0:t.checkAll=!1,t.$refs.menuTree.setCheckedKeys(t.menuIds))})})},closeDialog:function(){this.dialogFormVisible=!1},opened:function(){},closed:function(){this.roleId=null},handleCheckAllChange:function(e){var t=this;this.checkAll?(this.checkStrictly=!1,setTimeout(function(){t.$refs.menuTree.setCheckedNodes(t.menus)},0),setTimeout(function(){t.checkStrictly=!0},0)):this.$refs.menuTree.setCheckedKeys([])},handleCheckChange:function(){this.menuIds=this.$refs.menuTree.getCheckedKeys(),this.menuNodeNumber==this.menuIds.length?this.checkAll=!0:this.checkAll=!1},submitForm:function(){var e=this;this.menuIds=this.$refs.menuTree.getCheckedKeys(),this.$axios.put("/api/backstage/rolemanage/menu/"+this.roleId,o()(this.menuIds)).then(function(t){var n=t.data;0===n.code&&(e.$message({type:"success",message:n.msg}),e.closeDialog(),e.$emit("roleTableRefresh"))})}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"菜单管理",visible:e.dialogFormVisible,"close-on-click-modal":!1,width:"500px",align:"left"},on:{"update:visible":function(t){e.dialogFormVisible=t},opened:e.opened,closed:e.closed}},[n("el-checkbox",{on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),n("el-tree",{ref:"menuTree",attrs:{data:e.menus,props:e.optionProps,"node-key":"id","show-checkbox":"","check-strictly":e.checkStrictly,"default-expand-all":"","highlight-current":""},on:{"check-change":e.handleCheckChange}}),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确定修改")])],1)],1)},staticRenderFns:[]};var c=n("VU/8")(s,l,!1,function(e){n("4xMK")},"data-v-edfe1ce4",null);t.default=c.exports},mvHQ:function(e,t,n){e.exports={default:n("qkKv"),__esModule:!0}},qkKv:function(e,t,n){var i=n("FeBl"),o=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}}});
webpackJsonp([12],{"9+jk":function(e,t){},lngt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={name:"RoleManage",components:{RoleAdd:function(){return n.e(42).then(n.bind(null,"Hwp8"))},RoleEdit:function(){return n.e(44).then(n.bind(null,"vSO3"))},RoleMenuManage:function(){return n.e(32).then(n.bind(null,"gHWd"))},RolePurviewManage:function(){return n.e(31).then(n.bind(null,"KcDu"))}},data:function(){return{disabled:!0,table:{tableData:[],limit:20,page:1,total:0,hideOnSinglePage:!1},multipleSelection:[]}},methods:{getRoles:function(){var e=this;this.$axios.get("/api/backstage/rolemanage",{params:{page:this.table.page,limit:this.table.limit}}).then(function(t){var n=t.data;0===n.code&&(e.table.tableData=n.data,e.table.total=n.count)})},handleCurrentChange:function(e){this.table.page=e,this.getRoles()},handleSizeChange:function(e){this.table.limit=e,this.getRoles()},handleSelectionChange:function(e){this.multipleSelection=e,this.multipleSelection.length>0?this.disabled=!1:this.disabled=!0},checkSelection:function(){if(this.multipleSelection.length>0)return!0;this.$message.error("请先选择数据")},handleDelete:function(){var e=this;if(this.checkSelection()){var t=this.multipleSelection.length;this.$confirm(" 确定要批量删除这"+t+"个角色吗？","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t=[],n=0;n<e.multipleSelection.length;n++)t.push(e.multipleSelection[n].id);e.$axios.delete("/api/backstage/rolemanage/"+t.toString()).then(function(t){0===t.data.code&&e.getRoles()})}).catch(function(e){})}},editRole:function(e){this.$refs.roleEditForm.openDialog(e)},menuManage:function(e){this.$refs.roleMenuManageForm.openDialog(e)},purviewManage:function(e){this.$refs.rolePurviewManageForm.openDialog(e)}},mounted:function(){this.getRoles()}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"item",staticStyle:{"margin-bottom":"5px"},attrs:{align:"left"}},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.$refs.roleAddForm.openDialog()}}},[e._v("添加")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini",disabled:e.disabled},on:{click:e.handleDelete}},[e._v("删除")])],1),e._v(" "),n("div",{staticClass:"item"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.table.tableData,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"40",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"nameZH",label:"中文名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"英文名"}}),e._v(" "),n("el-table-column",{attrs:{width:"50",align:"center",prop:"level",label:"级别"}}),e._v(" "),n("el-table-column",{attrs:{width:"70",align:"center",prop:"defaultRole",label:"默认角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.defaultRole?n("el-tag",{attrs:{size:"medium",type:"success"}},[e._v("是")]):e._e(),e._v(" "),0==t.row.defaultRole?n("el-tag",{attrs:{size:"medium",type:"info"}},[e._v("否")]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"70",align:"center",prop:"enabled",label:"是否启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.enabled?n("el-tag",{attrs:{size:"medium",type:"success"}},[e._v("是")]):e._e(),e._v(" "),0==t.row.enabled?n("el-tag",{attrs:{size:"medium",type:"info"}},[e._v("否")]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"description",label:"角色描述"}}),e._v(" "),n("el-table-column",{attrs:{width:"60",align:"center",prop:"adminNumber",label:"账户数"}}),e._v(" "),n("el-table-column",{attrs:{width:"60",align:"center",prop:"purviewNumber",label:"权限数"}}),e._v(" "),n("el-table-column",{attrs:{width:"60",align:"center",prop:"menuNumber",label:"菜单数"}}),e._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit"},on:{click:function(n){return e.editRole(t.row.id)}}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-user"},on:{click:function(n){return e.menuManage(t.row.id)}}},[e._v("菜单分配")]),e._v(" "),n("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-user"},on:{click:function(n){return e.purviewManage(t.row.id)}}},[e._v("权限分配")])]}}])})],1)],1),e._v(" "),n("div",{staticClass:"text item"},[n("div",{staticClass:"block"},[n("el-pagination",{attrs:{background:"",layout:"prev,pager,next,total,sizes,jumper","hide-on-single-page":e.table.hideOnSinglePage,"page-sizes":[10,20,50,100],"page-size":e.table.limit,"current-page":e.table.page,total:e.table.total,"pager-count":11},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),e._v(" "),n("RoleAdd",{ref:"roleAddForm",on:{roleTableRefresh:e.getRoles}}),e._v(" "),n("RoleEdit",{ref:"roleEditForm",on:{roleTableRefresh:e.getRoles}}),e._v(" "),n("RoleMenuManage",{ref:"roleMenuManageForm",on:{roleTableRefresh:e.getRoles}}),e._v(" "),n("RolePurviewManage",{ref:"rolePurviewManageForm",on:{roleTableRefresh:e.getRoles}})],1)},staticRenderFns:[]};var i=n("VU/8")(l,a,!1,function(e){n("9+jk")},"data-v-79a7d1b6",null);t.default=i.exports}});
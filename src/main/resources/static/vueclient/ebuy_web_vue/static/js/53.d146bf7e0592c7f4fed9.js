webpackJsonp([53],{"2kpm":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={name:"MenuAdd",props:{menuArray:{type:Array,default:function(){return[]}}},data:function(){return{dialogFormVisible:!1,optionProps:{value:"id",label:"name",children:"children",checkStrictly:!0},form:{parentId:"",name:"",orderNum:100,url:"",enabled:!0,component:"",iconCls:"",route:"",path:"",requireAuth:!0,display:!0,menuIdPathArray:[]},rules:{name:[{required:!0,message:"不能为空",trigger:"blur"},{max:20,message:"长度不能超过20个字符",trigger:"blur"}],url:[{required:!0,message:"不能为空",trigger:"blur"},{max:200,message:"长度不能超过200个字符",trigger:"blur"}],orderNum:[{required:!0,message:"不能为空",trigger:"blur"},{type:"number",message:"必须为数字值",trigger:"blur"}],component:[{max:20,message:"长度不能超过20个字符",trigger:"blur"}],iconCls:[{max:200,message:"长度不能超过200个字符",trigger:"blur"}],route:[{max:200,message:"长度不能超过200个字符",trigger:"blur"}],path:[{max:200,message:"长度不能超过200个字符",trigger:"blur"}]}}},methods:{resetForm:function(){this.form.name="",this.form.orderNum=100,this.form.url="",this.form.enabled=!0,this.form.component="",this.form.route="",this.form.path="",this.form.requireAuth=!0,this.form.display=!0},openDialog:function(e){if(this.dialogFormVisible=!0,this.form.menuIdPathArray=[],this.form.parentId=e,void 0!=e)for(var r=this.myMethod.tree.getRootPathAtTreeByKey(e,"id",this.menuArray),t=0;t<r.length;t++)this.form.menuIdPathArray.push(r[t].id)},closeDialog:function(){this.dialogFormVisible=!1},opened:function(){},closed:function(){this.$refs.form.resetFields()},menuChange:function(e){e.length>0?this.form.parentId=e[e.length-1]:this.form.parentId=""},submitForm:function(e){var r=this;this.$refs[e].validate(function(e){if(!e)return!1;r.$axios.post("/api/backstage/menumanage",window.JSON.stringify(r.form)).then(function(e){var t=e.data;0===t.code&&(r.$message({type:"success",message:t.msg}),r.resetForm(),r.$emit("menuTableRefresh"))})})}},mounted:function(){}},l={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-dialog",{attrs:{title:"菜单创建",visible:e.dialogFormVisible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(r){e.dialogFormVisible=r},opened:e.opened,closed:e.closed}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"上级菜单",prop:"menuIdPathArray",align:"left"}},[t("el-cascader",{ref:"menuCascader",attrs:{clearable:"",options:e.menuArray,props:e.optionProps},on:{change:e.menuChange},model:{value:e.form.menuIdPathArray,callback:function(r){e.$set(e.form,"menuIdPathArray",r)},expression:"form.menuIdPathArray"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"菜单名",prop:"name"}},[t("el-input",{model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"优先级",prop:"orderNum"}},[t("el-input",{model:{value:e.form.orderNum,callback:function(r){e.$set(e.form,"orderNum",e._n(r))},expression:"form.orderNum"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否可用",prop:"enabled",align:"left"}},[t("el-switch",{model:{value:e.form.enabled,callback:function(r){e.$set(e.form,"enabled",r)},expression:"form.enabled"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"资源地址",prop:"url"}},[t("el-input",{model:{value:e.form.url,callback:function(r){e.$set(e.form,"url",r)},expression:"form.url"}})],1),e._v(" "),t("el-divider",{attrs:{"content-position":"center"}},[e._v("组件设置")]),e._v(" "),t("el-form-item",{attrs:{label:"组件名称",prop:"component"}},[t("el-input",{model:{value:e.form.component,callback:function(r){e.$set(e.form,"component",r)},expression:"form.component"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"组件图片",prop:"iconCls",placeholder:"请结合前端，填写图片样式名称"}},[t("el-input",{model:{value:e.form.iconCls,callback:function(r){e.$set(e.form,"iconCls",r)},expression:"form.iconCls"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"路由地址",prop:"route"}},[t("el-input",{model:{value:e.form.route,callback:function(r){e.$set(e.form,"route",r)},expression:"form.route"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"组件地址",prop:"path"}},[t("el-input",{model:{value:e.form.path,callback:function(r){e.$set(e.form,"path",r)},expression:"form.path"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"需要登陆",prop:"requireAuth",align:"left"}},[t("el-switch",{model:{value:e.form.requireAuth,callback:function(r){e.$set(e.form,"requireAuth",r)},expression:"form.requireAuth"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否显示",prop:"display",align:"left"}},[t("el-switch",{model:{value:e.form.display,callback:function(r){e.$set(e.form,"display",r)},expression:"form.display"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(r){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("form")}}},[e._v("创建菜单")])],1)],1)},staticRenderFns:[]};var a=t("VU/8")(o,l,!1,function(e){t("R8+c")},"data-v-e7886b10",null);r.default=a.exports},"R8+c":function(e,r){}});